# Webpack

## åŸºç¡€

### entry

- æ¦‚å¿µï¼šå…¥å£èµ·ç‚¹(entry point)æŒ‡ç¤º webpack åº”è¯¥ä½¿ç”¨å“ªä¸ªæ¨¡å—ï¼Œæ¥ä½œä¸ºæ„å»ºå…¶å†…éƒ¨ä¾èµ–å›¾çš„å¼€å§‹ã€‚è¿›å…¥å…¥å£èµ·ç‚¹åï¼Œwebpack ä¼šæ‰¾å‡ºæœ‰å“ªäº›æ¨¡å—å’Œåº“æ˜¯å…¥å£èµ·ç‚¹ï¼ˆç›´æ¥å’Œé—´æ¥ï¼‰ä¾èµ–çš„ï¼Œæ¯ä¸ªä¾èµ–é¡¹éšå³è¢«å¤„ç†ï¼Œæœ€åè¾“å‡ºåˆ°ç§°ä¹‹ä¸º bundles çš„æ–‡ä»¶ä¸­ã€‚
- å•å…¥å£: string
- å¤šå…¥å£: entry æ˜¯â¼€ä¸€ä¸ªå¯¹è±¡æˆ–è€…æ•°ç»„(æˆ‘ä»¬å‘Šè¯‰ webpack éœ€è¦å¤šä¸ªç‹¬ç«‹åˆ†ç¦»çš„ä¾èµ–å›¾)

### output

- æ¦‚å¿µ: output å±æ€§å‘Šè¯‰ webpack åœ¨å“ªé‡Œè¾“å‡ºå®ƒæ‰€åˆ›å»ºçš„ bundlesï¼Œä»¥åŠå¦‚ä½•å‘½åè¿™äº›æ–‡ä»¶ï¼Œé»˜è®¤å€¼ä¸º ./distã€‚åŸºæœ¬ä¸Šï¼Œæ•´ä¸ªåº”ç”¨ç¨‹åºç»“æ„ï¼Œéƒ½ä¼šè¢«ç¼–è¯‘åˆ°ä½ æŒ‡å®šçš„è¾“å‡ºè·¯å¾„çš„æ–‡ä»¶å¤¹ä¸­ã€‚ä½ å¯ä»¥é€šè¿‡åœ¨é…ç½®ä¸­æŒ‡å®šä¸€ä¸ª output å­—æ®µï¼Œæ¥é…ç½®è¿™äº›å¤„ç†è¿‡ç¨‹
- option

	- filename ç”¨äºè¾“å‡ºæ–‡ä»¶çš„æ–‡ä»¶å
	- chunkFilename

		- ä¸ªäººç†è§£chunknameå°±æ˜¯æœªè¢«åˆ—åœ¨entryä¸­ï¼Œä½†æœ‰äº›åœºæ™¯éœ€è¦è¢«æ‰“åŒ…å‡ºæ¥çš„æ–‡ä»¶å‘½åé…ç½®ã€‚æ¯”å¦‚æŒ‰éœ€åŠ è½½ï¼ˆå¼‚æ­¥ï¼‰æ¨¡å—çš„æ—¶å€™ï¼Œè¿™æ ·çš„æ–‡ä»¶æ˜¯æ²¡æœ‰è¢«åˆ—åœ¨entryä¸­çš„ä½¿ç”¨CommonJSçš„æ–¹å¼å¼‚æ­¥åŠ è½½æ¨¡å—(é€šå¸¸ä¸€ä¸ªentryå¯¹åº”ä¸€ä¸ªbundleï¼Œæ¯”å¦‚æŒ‰éœ€åŠ è½½å•ç‹¬æŠ½ç¦»çš„æ–‡ä»¶å°±æŒ‰chunkFilenameå‘½å)

	- pathç›®æ ‡è¾“å‡ºç›®å½• path çš„ç»å¯¹è·¯å¾„
	- publicPath

		- webpack æä¾›ä¸€ä¸ªéå¸¸æœ‰ç”¨çš„é…ç½®ï¼Œè¯¥é…ç½®èƒ½å¸®åŠ©ä½ ä¸ºé¡¹ç›®ä¸­çš„æ‰€æœ‰èµ„æºæŒ‡å®šä¸€ä¸ªåŸºç¡€è·¯å¾„ï¼Œå®ƒè¢«ç§°ä¸ºå…¬å…±è·¯å¾„(publicPath)ã€‚
		- é™æ€èµ„æºæœ€ç»ˆè®¿é—®è·¯å¾„ = output.publicPath + èµ„æºloaderæˆ–æ’ä»¶ç­‰é…ç½®è·¯å¾„ ä¸¾ä¸ªä¾‹å­ğŸŒ°ï¼špublicPath: "https://cdn.example.com/assets/"
å‰ç«¯æ‰“åŒ…çš„å‡ºæ¥çš„æ–‡ä»¶ğŸ“ƒå®é™…å°±æ˜¯é™æ€èµ„æº

	- library

		- libraryæŒ‡å®šçš„å°±æ˜¯ä½ ä½¿ç”¨requireæ—¶çš„æ¨¡å—å

	- libraryTarget

		- é…ç½®å¦‚ä½•æš´éœ² libraryçš„æ–¹å¼ï¼ˆé€šå¸¸libraryä¸æ˜¯å¼€å‘åº“ç­‰åœ¨é¡¹ç›®ä¸­ä¸éœ€è¦é…ç½®ï¼‰

### loaders

- æ¦‚å¿µï¼šæˆ‘ä»¬åœ¨å‰ç«¯æ„å»ºä¸­ä¼šé‡è§éœ€è¦ä½¿ç”¨å„å¼å„æ ·çš„æ–‡ä»¶ï¼Œä¾‹å¦‚ css ä»£ç ï¼Œå›¾ç‰‡ï¼Œæ¨¡æ¿ä»£ç ç­‰ã€‚webpack ä¸­æä¾›ä¸€ç§å¤„ç†å¤šç§æ–‡ä»¶æ ¼å¼çš„æœºåˆ¶ï¼Œä¾¿æ˜¯ä½¿ç”¨ loaderã€‚æˆ‘ä»¬å¯ä»¥æŠŠ loader ç†è§£ä¸ºæ˜¯ä¸€ä¸ªè½¬æ¢å™¨ï¼Œè´Ÿè´£æŠŠæŸç§æ–‡ä»¶æ ¼å¼çš„å†…å®¹è½¬æ¢æˆ webpack å¯ä»¥æ”¯æŒæ‰“åŒ…çš„æ¨¡å—ã€‚ï¼ˆæ³¨æ„å§‹ç»ˆç†è§£ä¸€ä¸ªæ¦‚å¿µå°±æ˜¯babelæ˜¯å¤„ç†æ¨¡å—moduleçš„,ä½ å¼•å…¥äº†ä¸€ä¸ªæ¨¡å—èµ„æºå°±è¦ç”¨å¯¹åº”çš„loaderå»å¤„ç†ï¼‰

	- ä¸¾ä¸ªä¾‹å­ğŸŒ°ï¼šä¸¾ä¸ªä¾‹å­ï¼Œåœ¨æ²¡æœ‰æ·»åŠ é¢å¤–æ’ä»¶çš„æƒ…å†µä¸‹ï¼Œwebpack ä¼šé»˜è®¤æŠŠæ‰€æœ‰ä¾èµ–æ‰“åŒ…æˆ js æ–‡ä»¶ï¼Œå¦‚æœå…¥å£æ–‡ä»¶ä¾èµ–ä¸€ä¸ª .hbs çš„æ¨¡æ¿æ–‡ä»¶ä»¥åŠä¸€ä¸ª .css çš„æ ·å¼æ–‡ä»¶ï¼Œé‚£ä¹ˆæˆ‘ä»¬éœ€è¦ handlebars-loader æ¥å¤„ç† .hbs æ–‡ä»¶ï¼Œéœ€è¦ css-loader æ¥å¤„ç† .css æ–‡ä»¶ï¼ˆè¿™é‡Œå…¶å®è¿˜éœ€è¦ style-loaderï¼Œåç»­è¯¦è§£ï¼‰ï¼Œæœ€ç»ˆæŠŠä¸åŒæ ¼å¼çš„æ–‡ä»¶éƒ½è§£ææˆ js ä»£ç ï¼Œä»¥ä¾¿æ‰“åŒ…ååœ¨æµè§ˆå™¨ä¸­è¿è¡Œã€‚

- å¸¸ç”¨loader

	- css-loader
	- less-loader
	- scss-loader
	- file-loader
	- url-loader
	- babel-loader
	- ts-loader
	- eslint-loader
	- thread-loader å¤šè¿›ç¨‹

### plugins

- æ¦‚å¿µï¼šloader è¢«ç”¨äºè½¬æ¢æŸäº›ç±»å‹çš„æ¨¡å—ï¼ˆä¸æ¨¡å—æŒ‚é’©ï¼‰ï¼Œè€Œæ’ä»¶åˆ™å¯ä»¥ç”¨äºæ‰§è¡ŒèŒƒå›´æ›´å¹¿çš„ä»»åŠ¡ã€‚æ’ä»¶çš„èŒƒå›´åŒ…æ‹¬ï¼Œä»æ‰“åŒ…ä¼˜åŒ–å’Œå‹ç¼©ï¼Œä¸€ç›´åˆ°é‡æ–°å®šä¹‰ç¯å¢ƒä¸­çš„å˜é‡ã€‚æ’ä»¶æ¥å£åŠŸèƒ½æå…¶å¼ºå¤§ï¼Œå¯ä»¥ç”¨æ¥å¤„ç†å„ç§å„æ ·çš„ä»»åŠ¡ã€‚
- å¸¸ç”¨æ’ä»¶

	- HotModuleReplacementPlugin

		- æ¨¡å—çƒ­æ›´æ–°æ’ä»¶ã€‚Hot-Module-Replacement çš„çƒ­æ›´æ–°æ˜¯ä¾èµ–äº webpack-dev-serverï¼Œåè€…æ˜¯åœ¨æ‰“åŒ…æ–‡ä»¶æ”¹å˜æ—¶æ›´æ–°æ‰“åŒ…æ–‡ä»¶æˆ–è€… reload åˆ·æ–°æ•´ä¸ªé¡µé¢ï¼ŒHRM æ˜¯åªæ›´æ–°ä¿®æ”¹çš„éƒ¨åˆ†

	- HtmlWebpackPlugin

		- ç”Ÿæˆ html æ–‡ä»¶ã€‚å°† webpack ä¸­entryé…ç½®çš„ç›¸å…³å…¥å£ chunk å’Œ extract-text-webpack-pluginæŠ½å–çš„ css æ ·å¼ æ’å…¥åˆ°è¯¥æ’ä»¶æä¾›çš„templateæˆ–è€…templateContenté…ç½®é¡¹æŒ‡å®šçš„å†…å®¹åŸºç¡€ä¸Šç”Ÿæˆä¸€ä¸ª html æ–‡ä»¶ï¼Œå…·ä½“æ’å…¥æ–¹å¼æ˜¯å°†æ ·å¼linkæ’å…¥åˆ°headå…ƒç´ ä¸­ï¼Œscriptæ’å…¥åˆ°headæˆ–è€…bodyä¸­ã€‚

	- clean-webpack-plugin

		- clean-webpack-plugin ç”¨äºåœ¨æ‰“åŒ…å‰æ¸…ç†ä¸Šä¸€æ¬¡é¡¹ç›®ç”Ÿæˆçš„ bundle æ–‡ä»¶ï¼Œå®ƒä¼šæ ¹æ® output.path è‡ªåŠ¨æ¸…ç†æ–‡ä»¶å¤¹ï¼›è¿™ä¸ªæ’ä»¶åœ¨ç”Ÿäº§ç¯å¢ƒç”¨çš„é¢‘ç‡éå¸¸é«˜ï¼Œå› ä¸ºç”Ÿäº§ç¯å¢ƒç»å¸¸ä¼šé€šè¿‡ hash ç”Ÿæˆå¾ˆå¤š bundle æ–‡ä»¶ï¼Œå¦‚æœä¸è¿›è¡Œæ¸…ç†çš„è¯æ¯æ¬¡éƒ½ä¼šç”Ÿæˆæ–°çš„ï¼Œå¯¼è‡´æ–‡ä»¶å¤¹éå¸¸åºå¤§ã€‚

	- mini-css-extract-plugin

		- å°† CSS æå–ä¸ºç‹¬ç«‹çš„æ–‡ä»¶çš„æ’ä»¶ï¼Œå¯¹æ¯ä¸ªåŒ…å« css çš„ js æ–‡ä»¶éƒ½ä¼šåˆ›å»ºä¸€ä¸ª CSS æ–‡ä»¶ï¼Œæ”¯æŒæŒ‰éœ€åŠ è½½ css å’Œ sourceMap
		- è¿™ä¸ªæ’ä»¶åº”è¯¥åªç”¨åœ¨ç”Ÿäº§ç¯å¢ƒé…ç½®ï¼Œå¹¶ä¸”åœ¨ loaders é“¾ä¸­ä¸ä½¿ç”¨ style-loader, è€Œä¸”è¿™ä¸ªæ’ä»¶æš‚æ—¶ä¸æ”¯æŒ HMR

	- purifycss-webpack

		- æœ‰æ—¶å€™æˆ‘ä»¬ css å†™å¾—å¤šäº†æˆ–è€…é‡å¤äº†ï¼Œè¿™å°±é€ æˆäº†å¤šä½™çš„ä»£ç ï¼Œæˆ‘ä»¬å¸Œæœ›åœ¨ç”Ÿäº§ç¯å¢ƒè¿›è¡Œå»é™¤ã€‚

	- optimize-css-assets-webpack-plugin

		- æˆ‘ä»¬å¸Œæœ›å‡å° css æ‰“åŒ…åçš„ä½“ç§¯ï¼ˆè¿›è¡Œå‹ç¼©ï¼‰ï¼Œå¯ä»¥ç”¨åˆ° optimize-css-assets-webpack-pluginã€‚

### mode

- production
- development
- none

### devltool

- ç©º ä¸ç”ŸæˆSource Map
- eval  ç”¨evalè¯­å¥åŒ…è£¹éœ€è¦å®‰è£…çš„æ¨¡å—
- source-map ç”Ÿæˆç‹¬ç«‹çš„Source Mapæ–‡ä»¶
- hidden-source-map  ä¸åœ¨Javascriptæ–‡ä»¶ä¸­æŒ‡å‡ºSource Mapæ–‡ä»¶çš„æ‰€åœ¨,è¿™æ ·æµè§ˆå™¨å°±ä¸ä¼šè‡ªåŠ¨åŠ è½½Source Map
- inline-source-map å°†ç”Ÿæˆçš„Source Mapè½¬æ¢æˆbase64æ ¼å¼ å†…åµŒåœ¨JavaScriptæ–‡ä»¶ä¸­
- eval-source-map
- cheap-source-map å’Œsource-mapç±»ä¼¼ï¼Œä½†ç”Ÿæˆçš„Source Mapæ–‡ä»¶ä¸­æ²¡æœ‰åˆ—çš„ä¿¡æ¯ï¼Œå› æ­¤ç”Ÿæˆçš„é€Ÿåº¦æ›´å¿«
- cheap-module-source-map 

## WebpackåŸç†

### three-shaking

### çƒ­æ›´æ–°åŸç†

- js cssç›´æ¥ç›´æ¥çƒ­æ›´æ–°
- å› ä¸ºæ¡†æ¶å¤©ç„¶æ”¯æŒçƒ­æ›´æ–°

## æ‹“å±•çŸ¥è¯†ç‚¹

### babel

- æ¦‚å¿µï¼šBabel æ˜¯ä¸€ä¸ªå·¥å…·é“¾ï¼Œä¸»è¦ç”¨äºå°† ECMAScript 2015+ ç‰ˆæœ¬çš„ä»£ç è½¬æ¢ä¸ºå‘åå…¼å®¹çš„ JavaScript è¯­æ³•ï¼Œä»¥ä¾¿èƒ½å¤Ÿè¿è¡Œåœ¨å½“å‰å’Œæ—§ç‰ˆæœ¬çš„æµè§ˆå™¨æˆ–å…¶ä»–ç¯å¢ƒä¸­
- ä½¿ç”¨æ–¹æ³•

	- ä½¿ç”¨å•ä½“æ–‡ä»¶ (standalone script)
	- å‘½ä»¤è¡Œ (cli)
	- æ„å»ºå·¥å…·çš„æ’ä»¶ (webpack çš„ babel-loader, rollup çš„ rollup-plugin-babel)ã€‚

- é…ç½®æ–‡ä»¶
- babelå¯ä»¥è§£æjs jsx ts tsx ï¼Œæ‰€ä»¥è¿™éƒ¨åˆ†å·¥ä½œæ˜¯ç”±babelåšçš„ æ²¡å¿…è¦äº¤ç»™webpack

## æ‰“åŒ…ç»„ä»¶åº“

### æä¾›umdã€esã€commonjsæ‰“åŒ…æ¨¡å—ï¼Œæä¾›æŒ‰éœ€åŠ è½½åŠŸèƒ½

### æä¾›sideEffectå­—æ®µï¼Œå‘Šè¯‰webpackå“ªäº›æ–‡ä»¶æ˜¯æœ‰å‰¯ä½œç”¨çš„

### é…ç½®ts,é…ç½®tsconfig

- typescriptæœ‰æä¾›ç±»å‹æ³¨è§£å’Œç¼–è¯‘çš„åŠŸèƒ½
- æ‰€ä»¥ä½ æ˜¯å¦è¦ç¼–è¯‘æˆé‚£ç§ç±»å‹çš„jså–å†³äºä½ çš„åœºæ™¯

### é…ç½®jest

### å‘å¸ƒåˆ°npm

### å¦‚ä½•è¿›è¡Œå•å…ƒæµ‹è¯•ï¼ˆæˆ‘çš„åšæ³•ï¼‰

- reacté¡¹ç›®éœ€è¦æ¸²æŸ“å‡ºrenderæ‰èƒ½æ¨¡æ‹Ÿæµ‹è¯•ï¼Œä½ ä¸æ¸²æŸ“å°±æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œéƒ½ä¸ç”Ÿæˆhtmlå¸ƒå±€
- æ¨¡æ‹Ÿå„ç§åœºæ™¯ï¼Œå‚ç…§æµ‹è¯•ç”¨ä¾‹
- è¿›è¡Œæ–­è¨€ï¼ŒæŸ¥çœ‹è¦†ç›–ç‡æ˜¯å¦é—æ¼
- å€¼å¾—æ³¨æ„çš„æ˜¯ä¸€äº›æ¡†æ¶æˆ–è€…åº“æœ€ç»ˆéƒ½æ˜¯è¦è½¬åŒ–ä¸ºjsï¼Œæ‰€ä»¥éœ€è¦ä¸åŒçš„babelå»è§£æä»–ä»¬

## æ€§èƒ½ä¼˜åŒ–

### æ€§èƒ½åˆ†æ

- ä½“ç§¯åˆ†æ

	- åˆçº§åˆ†æ

		- å¯ä»¥é€šè¿‡å®˜æ–¹æä¾›çš„ stat.json æ–‡ä»¶å¸®åŠ©æˆ‘ä»¬åˆ†ææ‰“åŒ…ç»“æœï¼Œstat.json æ–‡ä»¶å¯ä»¥é€šè¿‡ä¸‹é¢è¯­å¥å¿«é€Ÿç”Ÿæˆï¼š
		- webpack --profile --json > stats.json

	- ç¬¬ä¸‰æ–¹å·¥å…·

		- webpack-bundle-analyzer æ˜¯æ‰“åŒ…åˆ†æç¥å™¨
		- webpack-bundle-analyzer å…¶åº•å±‚ä¹Ÿæ˜¯ä¾èµ– stat.json æ–‡ä»¶çš„ï¼Œé€šè¿‡å¯¹ stat.json çš„åˆ†æï¼Œå¾—å‡ºæœ€åçš„åˆ†æé¡µé¢

- é€Ÿåº¦åˆ†æ

	- speed-measure-webpack-plugin è¿™ä¸ªæ’ä»¶å¸®åŠ©æˆ‘ä»¬åˆ†ææ•´ä¸ªæ‰“åŒ…çš„æ€»è€—æ—¶ï¼Œä»¥åŠæ¯ä¸€ä¸ªloader å’Œæ¯ä¸€ä¸ª plugins æ„å»ºæ‰€è€—è´¹çš„æ—¶é—´ï¼Œä»è€Œå¸®åŠ©æˆ‘ä»¬å¿«é€Ÿå®šä½åˆ°å¯ä»¥ä¼˜åŒ– Webpack çš„é…ç½®

### ä¼˜åŒ–ç­–ç•¥

- ä½¿ç”¨æ–°ç‰ˆæœ¬

	- è¿™ä¸ªæ˜¯ webpack æ€§èƒ½ä¼˜åŒ–çš„ä¸‡èƒ½è†è¯ï¼Œå‡çº§ç‰ˆæœ¬å¿…å®šèƒ½å¸¦æ¥æ€§èƒ½æå‡ï¼Œè€Œä¸”æå‡å¾ˆæ˜æ˜¾
	- webpack4.0 å¸¦æ¥çš„ä¼˜åŒ–

		- v8 å¼•æ“å¸¦æ¥çš„ä¼˜åŒ–ï¼ˆfor of æ›¿ä»£ forEachã€Map å’Œ Set æ›¿ä»£ Objectã€includes æ›¿ä»£ indexOfï¼‰
		- é»˜è®¤ä½¿ç”¨æ›´å¿«çš„ md4 hash ç®—æ³•
		- webpack AST å¯ä»¥ç›´æ¥ä» loader ä¼ é€’ç»™ ASTï¼Œå‡å°‘è§£ææ—¶é—´
		- ä½¿ç”¨å­—ç¬¦ä¸²æ–¹æ³•æ›¿ä»£æ­£åˆ™è¡¨è¾¾å¼

- ä½“ç§¯ä¼˜åŒ–

	- js å‹ç¼©

		- webpack4.0 é»˜è®¤åœ¨ç”Ÿäº§ç¯å¢ƒçš„æ—¶å€™æ˜¯æ”¯æŒä»£ç å‹ç¼©çš„ï¼Œå³ mode=production æ¨¡å¼ä¸‹
		- å®é™…ä¸Š webpack4.0 é»˜è®¤æ˜¯ä½¿ç”¨  terser-webpack-plugin è¿™ä¸ªå‹ç¼©æ’ä»¶ï¼Œåœ¨æ­¤ä¹‹å‰æ˜¯ä½¿ç”¨ uglifyjs-webpack-pluginï¼Œä¸¤è€…çš„åŒºåˆ«æ˜¯åè€…å¯¹ ES6 çš„å‹ç¼©ä¸æ˜¯å¾ˆå¥½ï¼ŒåŒæ—¶æˆ‘ä»¬å¯ä»¥å¼€å¯ parallel å‚æ•°ï¼Œä½¿ç”¨å¤šè¿›ç¨‹å‹ç¼©ï¼ŒåŠ å¿«å‹ç¼©

	- CSS å‹ç¼©

		- å‹ç¼© CSS

			- æˆ‘ä»¬å¯ä»¥å€ŸåŠ© optimize-css-assets-webpack-plugin æ’ä»¶æ¥å‹ç¼© cssï¼Œå…¶é»˜è®¤ä½¿ç”¨çš„å‹ç¼©å¼•æ“æ˜¯ cssnano

		- æ“¦é™¤æ— ç”¨çš„ CSS

			- ä½¿ç”¨purgecss-webpack-pluginæ¥å®Œæˆå¯¹æ— ç”¨ css çš„æ“¦é™¤ï¼Œå®ƒéœ€è¦å’Œ mini-css-extract-plugin é…åˆä½¿ç”¨

	- å›¾ç‰‡å‹ç¼©

		- ä¸€èˆ¬æ¥è¯´åœ¨æ‰“åŒ…ä¹‹åï¼Œä¸€äº›å›¾ç‰‡æ–‡ä»¶çš„å¤§å°æ˜¯è¿œè¿œè¦æ¯” js æˆ–è€… css æ–‡ä»¶è¦æ¥çš„å¤§ï¼Œæ‰€ä»¥æˆ‘ä»¬é¦–å…ˆè¦åšçš„å°±æ˜¯å¯¹äºå›¾ç‰‡çš„ä¼˜åŒ–ï¼Œæˆ‘ä»¬å¯ä»¥æ‰‹åŠ¨çš„å»é€šè¿‡çº¿ä¸Šçš„å›¾ç‰‡å‹ç¼©å·¥å…·ï¼Œå¦‚ tiny png å¸®æˆ‘ä»¬æ¥å‹ç¼©å›¾ç‰‡
		- ä½†æ˜¯è¿™ä¸ªæ¯”è¾ƒç¹çï¼Œåœ¨é¡¹ç›®ä¸­æˆ‘ä»¬å¸Œæœ›èƒ½å¤Ÿæ›´åŠ è‡ªåŠ¨åŒ–ä¸€ç‚¹ï¼Œè‡ªåŠ¨å¸®æˆ‘ä»¬åšå¥½å›¾ç‰‡å‹ç¼©ï¼Œè¿™ä¸ªæ—¶å€™æˆ‘ä»¬å°±å¯ä»¥å€ŸåŠ© image-webpack-loader å¸®åŠ©æˆ‘ä»¬æ¥å®ç°ã€‚å®ƒæ˜¯åŸºäº imagemin è¿™ä¸ª Node åº“æ¥å®ç°å›¾ç‰‡å‹ç¼©çš„

	- æ‹†åˆ†ä»£ç 

		- æœ‰æ—¶å€™æˆ‘ä»¬å†™çš„æŸäº›æ¨¡å—æ ¹æœ¬æ²¡æœ‰ä½¿ç”¨ï¼Œä½†æ˜¯è¿˜æ˜¯è¢«æ‰“åŒ…äº†ï¼Œè¿™æ ·å®é™…ä¸Šä¼šæ‹–ç´¯ webpack çš„æ‰“åŒ…é€Ÿåº¦ï¼Œè€Œä¸”ä¹Ÿä¼šå¢åŠ æ‰“åŒ…æ–‡ä»¶çš„ä½“ç§¯ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ tree-shaking å°†è¿™äº›ä»£ç å‰”é™¤æ‰
		- æˆ–è€…ä¹Ÿå¯ä»¥ä½¿ç”¨ splitChunksPlugin æŠŠä¸€ä¸ªå¤§çš„æ–‡ä»¶åˆ†å‰²æˆå‡ ä¸ªå°çš„æ–‡ä»¶ï¼Œè¿™æ ·ä¹Ÿå¯ä»¥æœ‰æ•ˆçš„æå‡ webpack çš„æ‰“åŒ…é€Ÿåº¦

	- ä½¿ç”¨åŠ¨æ€PloyfillæœåŠ¡ 

		- æ ¹æ®æµè§ˆå™¨user-agentåŠ¨æ€è¯†åˆ« æ²¡å¿…è¦å…¨éƒ¨åŠ è½½ä¸Šæ¥ï¼Œå› ä¸ºæœ‰äº›æµè§ˆå™¨å·²ç»æ”¯æŒäº† ä¾‹å¦‚è°·æ­Œ

	- å¼€å¯Scope Hoisting

- é€Ÿåº¦ä¼˜åŒ–

	- åˆ†ç¦»

		- ä¸€èˆ¬æ¥è¯´åœ¨é¡¹ç›®å¼€å‘ä¸­ï¼Œæˆ‘ä»¬ä¼šåŒºåˆ†å¼€å‘å’Œç”Ÿäº§ç¯å¢ƒä¸¤å¥—é…ç½®ï¼Œå„å¸å…¶èŒ

	- å‡å°‘æŸ¥æ‰¾è¿‡ç¨‹

		- resolve

			- å¯¹ webpack çš„ resolve å‚æ•°è¿›è¡Œåˆç†é…ç½®ï¼Œä½¿ç”¨ resolve å­—æ®µå‘Šè¯‰ webpack æ€ä¹ˆå»æœç´¢æ–‡ä»¶

		- åˆç†ä½¿ç”¨ resolve.extensions

			- åœ¨å¯¼å…¥è¯­å¥æ²¡å¸¦æ–‡ä»¶åç¼€æ—¶ï¼Œwebpack ä¼šè‡ªåŠ¨å¸¦ä¸Šåç¼€åå»å°è¯•è¯¢é—®æ–‡ä»¶æ˜¯å¦å­˜åœ¨ï¼ŒæŸ¥è¯¢çš„é¡ºåºæ˜¯æŒ‰ç…§æˆ‘ä»¬é…ç½® çš„ resolve.extensions é¡ºåºä»å‰åˆ°åæŸ¥æ‰¾ï¼Œwebpack é»˜è®¤æ”¯æŒçš„åç¼€æ˜¯ js ä¸ json

		- ä¼˜åŒ– resolve.modules

			- è¿™ä¸ªå±æ€§å‘Šè¯‰ webpack è§£ææ¨¡å—æ—¶åº”è¯¥æœç´¢çš„ç›®å½•ï¼Œç»å¯¹è·¯å¾„å’Œç›¸å¯¹è·¯å¾„éƒ½èƒ½ä½¿ç”¨ã€‚ä½¿ç”¨ç»å¯¹è·¯å¾„ä¹‹åï¼Œå°†åªåœ¨ç»™å®šç›®å½•ä¸­æœç´¢ï¼Œä»è€Œå‡å°‘æ¨¡å—çš„æœç´¢å±‚çº§

		- ä½¿ç”¨ resolve.alias å‡å°‘æŸ¥æ‰¾è¿‡ç¨‹

			- alias çš„æ„æ€ä¸º åˆ«åï¼Œèƒ½æŠŠåŸå¯¼å…¥è·¯å¾„æ˜ å°„æˆä¸€ä¸ªæ–°çš„å¯¼å…¥è·¯å¾„
			- æ¯”å¦‚æˆ‘ä»¬ç»å¸¸ä½¿ç”¨çš„ react åº“ï¼Œå…¶å®æˆ‘ä»¬å¯ä»¥ç›´æ¥ä½¿ç”¨å…¶ dist ç›®å½•ä¸‹æ‰“åŒ…å¥½çš„ react.min.jsï¼Œè¿™æ ·å°±èƒ½è·³è¿‡è€—æ—¶çš„æ¨¡å—è§£æ

	- ç¼©å°æ„å»ºç›®æ ‡

		- æ’é™¤ Webpack ä¸éœ€è¦è§£æçš„æ¨¡å—ï¼Œå³ä½¿ç”¨ loader çš„æ—¶å€™ï¼Œåœ¨å°½é‡å°‘çš„æ¨¡å—ä¸­å»ä½¿ç”¨ã€‚
		- æˆ‘ä»¬å¯ä»¥å€ŸåŠ© include å’Œ exclude è¿™ä¸¤ä¸ªå‚æ•°ï¼Œè§„å®š loader åªåœ¨é‚£äº›æ¨¡å—åº”ç”¨å’Œåœ¨å“ªäº›æ¨¡å—ä¸åº”ç”¨

	- åˆ©ç”¨å¤šçº¿ç¨‹æå‡æ„å»ºé€Ÿåº¦

		- thread-loader

			- webpack å®˜æ–¹æ¨å‡ºçš„ä¸€ä¸ªå¤šè¿›ç¨‹æ–¹æ¡ˆï¼Œç”¨æ¥æ›¿ä»£ HappyPack
			- åŸç†å’Œ HappyPack ç±»ä¼¼ï¼Œwebpack æ¯æ¬¡è§£æä¸€ä¸ªæ¨¡å—ï¼Œthread-loader ä¼šå°†å®ƒåŠå®ƒçš„ä¾èµ–åˆ†é…ç»™ worker çº¿ç¨‹ä¸­ï¼Œä»è€Œè¾¾åˆ°å¤šè¿›ç¨‹æ‰“åŒ…çš„ç›®çš„

	- é¢„å…ˆç¼–è¯‘èµ„æºæ¨¡å—ï¼ˆDllPluginï¼‰

		- æˆ‘ä»¬åœ¨æ‰“åŒ…çš„æ—¶å€™ï¼Œä¸€èˆ¬æ¥è¯´ç¬¬ä¸‰æ–¹æ¨¡å—æ˜¯ä¸ä¼šå˜åŒ–çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬æƒ³åªè¦åœ¨ç¬¬ä¸€æ¬¡æ‰“åŒ…çš„æ—¶å€™å»æ‰“åŒ…ä¸€ä¸‹ç¬¬ä¸‰æ–¹æ¨¡å—ï¼Œå¹¶å°†ç¬¬ä¸‰æ–¹æ¨¡å—æ‰“åŒ…åˆ°ä¸€ä¸ªç‰¹å®šçš„æ–‡ä»¶ä¸­ï¼Œå½“ç¬¬äºŒæ¬¡ webpack è¿›è¡Œæ‰“åŒ…çš„æ—¶å€™ï¼Œå°±ä¸éœ€è¦å» node_modules ä¸­å»å¼•å…¥ç¬¬ä¸‰æ–¹æ¨¡å—ï¼Œè€Œæ˜¯ç›´æ¥ä½¿ç”¨æˆ‘ä»¬ç¬¬ä¸€æ¬¡æ‰“åŒ…çš„ç¬¬ä¸‰æ–¹æ¨¡å—çš„æ–‡ä»¶å°±è¡Œã€‚
		- webpack.DllPlugin å°±æ˜¯æ¥è§£å†³è¿™ä¸ªé—®é¢˜çš„æ’ä»¶ï¼Œä½¿ç”¨å®ƒå¯ä»¥åœ¨ç¬¬ä¸€æ¬¡ç¼–è¯‘æ‰“åŒ…åå°±ç”Ÿæˆä¸€ä»½ä¸å˜çš„ä»£ç ä¾›å…¶ä»–æ¨¡å—å¼•ç”¨ï¼Œè¿™æ ·ä¸‹ä¸€æ¬¡æ„å»ºçš„æ—¶å€™å°±å¯ä»¥èŠ‚çœå¼€å‘æ—¶ç¼–è¯‘æ‰“åŒ…çš„æ—¶é—´

	- ç¼“å­˜ Cache ç›¸å…³

		- æˆ‘ä»¬å¯ä»¥å¼€å¯ç›¸åº” loader æˆ–è€… plugin çš„ç¼“å­˜ï¼Œæ¥æå‡äºŒæ¬¡æ„å»ºçš„é€Ÿåº¦ã€‚ä¸€èˆ¬æˆ‘ä»¬å¯ä»¥é€šè¿‡ä¸‹é¢å‡ é¡¹æ¥å®Œæˆ

			- babel-loader å¼€å¯ç¼“å­˜
			- terser-webpack-plugin å¼€å¯ç¼“å­˜

	- åˆç†ä½¿ç”¨ sourceMap

		- ä¹‹å‰æˆ‘ä»¬æœ‰è®²è¿‡ï¼Œä¹‹å‰æˆ‘ä»¬æ‰“åŒ…ç”Ÿæˆ sourceMap çš„æ—¶å€™ï¼Œå¦‚æœä¿¡æ¯è¶Šè¯¦ç»†ï¼Œæ‰“åŒ…é€Ÿåº¦å°±ä¼šè¶Šæ…¢

## æ–‡ä»¶æŒ‡çº¹ç­–ç•¥

### æ¦‚è¿°ï¼šæ‰“åŒ…åè¾“å‡ºçš„æ–‡ä»¶ååç¼€ï¼Œç”¨äºåšç‰ˆæœ¬ç®¡ç†

### æ–‡ä»¶æŒ‡çº¹ç±»å‹

- hashï¼šå’Œæ•´ä¸ªé¡¹ç›®çš„æ„å»ºç›¸å…³ï¼Œåªè¦é¡¹ç›®æ–‡ä»¶æœ‰ä¿®æ”¹ï¼Œæ•´ä¸ªé¡¹ç›®æ„å»ºçš„hashå€¼å°±ä¼šæ›´æ”¹ã€‚
- chunkhashï¼šå’Œwebpackæ‰“åŒ…çš„chunkæœ‰å…³ï¼Œä¸åŒçš„entryä¼šç”Ÿæˆä¸åŒçš„chunkhashå€¼

	- å½“æˆ‘ä»¬å†™çš„ module æºæ–‡ä»¶ä¼ åˆ° webpack è¿›è¡Œæ‰“åŒ…æ—¶ï¼Œwebpack ä¼šæ ¹æ®æ–‡ä»¶å¼•ç”¨å…³ç³»ç”Ÿæˆ chunk æ–‡ä»¶(å­˜åœ¨å†…å­˜ä¸­)ï¼Œwebpack ä¼šå¯¹è¿™ä¸ª chunk æ–‡ä»¶è¿›è¡Œä¸€äº›æ“ä½œï¼Œæ‰€ä»¥æˆ‘ä»¬æ ¹æ®entryè¿˜æœ‰æ¨¡å—ä¹‹é—´çš„ä¾èµ–å…³ç³»æ¥åˆ¤æ–­æ¨¡å—æ˜¯å¦å¤„äºåŒä¸€ä¸ªchunk

- contenthashï¼šæ ¹æ®æ–‡ä»¶å†…å®¹æ¥å®šä¹‰hashï¼Œæ–‡ä»¶å†…å®¹ä¸å˜ï¼Œcontenthashä¸å˜

	- å®ƒçš„å‡ºç°ä¸»è¦æ˜¯ä¸ºäº†è§£å†³ï¼Œè®©cssæ–‡ä»¶ä¸å—jsæ–‡ä»¶çš„å½±å“ã€‚æ¯”å¦‚foo.cssè¢«foo.jså¼•ç”¨äº†ï¼Œæ‰€ä»¥å®ƒä»¬å…±ç”¨ç›¸åŒçš„chunkhashå€¼ã€‚ä½†è¿™æ ·å­æ˜¯æœ‰é—®é¢˜çš„ï¼Œå¦‚æœfoo.jsä¿®æ”¹äº†ä»£ç ï¼Œcssæ–‡ä»¶å°±ç®—å†…å®¹æ²¡æœ‰ä»»ä½•æ”¹å˜ï¼Œç”±äºæ˜¯è¯¥æ¨¡å—çš„ hash å‘ç”Ÿäº†æ”¹å˜ï¼Œå…¶cssæ–‡ä»¶çš„hashä¹Ÿä¼šéšä¹‹æ”¹å˜

### JSã€CSSæ–‡ä»¶çš„æŒ‡çº¹ç­–ç•¥

- JSèµ„æº

	- é‡‡ç”¨chunkhash
	- å¦‚æœé‡‡ç”¨contenthashæ ¹æ®JSæ–‡ä»¶å†…å®¹æ¥ç”Ÿæˆhash,ä½†æ˜¯ä¸€æ—¦æ ·å¼ä¿®æ”¹äº†ï¼Œcssæ–‡ä»¶åä¼šå˜åŒ–ï¼Œæ­¤æ—¶JSæ–‡ä»¶åº”è¯¥ä¹Ÿè¦å˜åŒ–ï¼Œé‡æ–°å¼•å…¥æ­£ç¡®âœ…çš„æ–‡ä»¶æ‰å¯¹

- å½“ä½¿ç”¨mini-css-extract-pluginæ’ä»¶æŠ½ç¦»cssæ–‡ä»¶æ—¶å€™ï¼Œè¯¥æ’ä»¶å¯ä»¥è·å–åˆ°webapckä¸­hashä»¥åŠå…¶è¯¥chunkä¸‹çš„hashï¼Œå½“ç„¶æ”¹æ’ä»¶è¿˜å¯ä»¥è‡ªå·±æ ¹æ®æ–‡ä»¶å†…å®¹ç”Ÿæˆhashä¹Ÿå°±æ˜¯contenthash

### å›¾ç‰‡çš„æ–‡ä»¶æŒ‡çº¹

- å½“æˆ‘ä»¬ä½¿ç”¨file-loaderå¤„ç†å›¾ç‰‡ç­‰èµ„æºæ—¶å€™ï¼Œå…¶é€‰é¡¹contenthashä»¥åŠhashé€‰é¡¹æ˜¯è‡ªå·±å†…éƒ¨ç”Ÿæˆçš„ï¼Œâ—ï¸ä¸é‡‡ç”¨webpackä¸­çš„hash

## æ¨¡å—

###  module

- å¯¹äºä¸€ä»½åŒé€»è¾‘çš„ä»£ç ï¼Œå½“æˆ‘ä»¬æ‰‹å†™ä¸‹ä¸€ä¸ªä¸€ä¸ªçš„æ–‡ä»¶ï¼Œå®ƒä»¬æ— è®ºæ˜¯ ESM è¿˜æ˜¯ commonJS æˆ–æ˜¯ AMDï¼Œä»–ä»¬éƒ½æ˜¯ module 

### chunk

- å½“æˆ‘ä»¬å†™çš„ module æºæ–‡ä»¶ä¼ åˆ° webpack è¿›è¡Œæ‰“åŒ…æ—¶ï¼Œwebpack ä¼šæ ¹æ®æ–‡ä»¶å¼•ç”¨å…³ç³»ç”Ÿæˆ chunk æ–‡ä»¶ï¼Œwebpack ä¼šå¯¹è¿™ä¸ª chunk æ–‡ä»¶è¿›è¡Œä¸€äº›æ“ä½œ
- ä¸€èˆ¬æ¥è¯´ä¸€ä¸ª chunk å¯¹åº”ä¸€ä¸ª bundleï¼Œæ¯”å¦‚ä¸Šå›¾ä¸­çš„ utils.js -> chunks 1 -> utils.bundle.jsï¼›ä½†ä¹Ÿæœ‰ä¾‹å¤–ï¼Œæ¯”å¦‚è¯´ä¸Šå›¾ä¸­ï¼Œæˆ‘å°±ç”¨ MiniCssExtractPlugin ä» chunks 0 ä¸­æŠ½ç¦»å‡ºäº† index.bundle.css æ–‡ä»¶ã€‚
- â—ï¸é€šå¸¸å­˜åœ¨äºå†…å­˜ä¸­

### bundle

- webpack å¤„ç†å¥½ chunk æ–‡ä»¶åï¼Œæœ€åä¼šè¾“å‡º bundle æ–‡ä»¶ï¼Œè¿™ä¸ª bundle æ–‡ä»¶åŒ…å«äº†ç»è¿‡åŠ è½½å’Œç¼–è¯‘çš„æœ€ç»ˆæºæ–‡ä»¶ï¼Œæ‰€ä»¥å®ƒå¯ä»¥ç›´æ¥åœ¨æµè§ˆå™¨ä¸­è¿è¡Œã€‚

### æœ¬è´¨

- moduleï¼Œchunk å’Œ bundle å…¶å®å°±æ˜¯åŒä¸€ä»½é€»è¾‘ä»£ç åœ¨ä¸åŒè½¬æ¢åœºæ™¯ä¸‹çš„å–äº†ä¸‰ä¸ªåå­—
- æˆ‘ä»¬ç›´æ¥å†™å‡ºæ¥çš„æ˜¯ moduleï¼Œwebpack å¤„ç†æ—¶æ˜¯ chunkï¼Œæœ€åç”Ÿæˆæµè§ˆå™¨å¯ä»¥ç›´æ¥è¿è¡Œçš„ bundle

## å‚è€ƒæ–‡ç« 

### webpack ä¸­é‚£äº›æœ€æ˜“æ··æ·†çš„ 5 ä¸ªçŸ¥è¯†ç‚¹
https://juejin.im/post/5cede821f265da1bbd4b5630#heading-1

### ä¸€å£(å¾ˆé•¿çš„)æ°”äº†è§£ babelï¼ˆhttps://juejin.im/post/5c19c5e0e51d4502a232c1c6#heading-3ï¼‰

## 

*XMind - Trial Version*